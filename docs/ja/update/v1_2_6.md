# 更新手順 v1.2.6 カンマ文字列除去
バージョン1.2.6へのアップデート時には、一部、特別なコマンドが必要となります。  
下記の手順が必要なユーザーと、その背景、ならびに更新の手順について記載します。  

## 背景
Exmentでは、列種類が「整数」「小数」「通貨」のとき、「カンマ文字列で表示する」という機能があります。  

![バージョン更新](../img/update/v1_2_6_comma1.png)  

その際、データ表示時や入力時に、カンマ文字列で表示されるようになります。

![バージョン更新](../img/update/v1_2_6_comma2.png)  

画面上ではカンマ文字列で表示されるのですが、データ保存の際、本来はカンマを取り除いて保存を行うのが正常でした。  

ですが、この処理に不具合があり、カンマ文字列を含んだまま、データ保存を行っていました。  

![バージョン更新](../img/update/v1_2_6_comma3.png)    

そのため、集計時に正常に計算できない不具合が発生しておりました。  
下記の例の場合、社員ごとの合計額の計算なのですが、社員１の合計額は「51400」に関わらず、集計すると「51」と表示されます。  

![バージョン更新](../img/update/v1_2_6_comma4.png)    
![バージョン更新](../img/update/v1_2_6_comma5.png)    

今回の修正は、このデータ内のカンマを取り除く処理になります。

## 対象
以下の条件の列を作成し、データ保存を行っている場合。
- 列種類が「整数」「小数」「通貨」のいずれか
- 列設定で、「数値 カンマ文字列」をYESにしている
- （該当の列で、4桁以上の数値で保存を行っている）


## 対応方法
- [通常のアップデート手順](/ja/update)で、v1.2.6以上に更新を行います。    

- 以下のコマンドを実行します。（※登録データ件数により、時間がかかる場合があります。）

~~~
php artisan exment:patchdata rmcomma
~~~

- これで、データ内のカンマが正常に削除され、正常に計算されます。  

![バージョン更新](../img/update/v1_2_6_comma6.png)    
![バージョン更新](../img/update/v1_2_6_comma7.png)    
