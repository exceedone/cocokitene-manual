# カスタム列「選択肢(他のテーブルから選択)」「ユーザー」「組織」で、データベースの登録値が数値型になる場合がある
### 発生条件
- カスタム列「選択肢(他のテーブルから選択)」「ユーザー」「組織」の項目を設定時、画面からデータ入力時には、データベースには文字列型(複数選択可の場合、文字列型の配列)として保存されます。※参考：[こちら](/ja/column_reference)
- しかし、画面ではない場所から保存（例：API、プラグイン）した場合に、数値型(複数選択可の場合、数値型の配列)で保存される場合がありました。
- そのため、APIからデータを取得した場合に、データによって値の型が異なる場合がありました。
- 本パッチでは、すでにデータベースに保存している値を、数値型から文字列型に揃える対応を実施しています。

### 発生バージョン
v4.1.2未満で登録したデータ

### 修正方法
- Exmentのバージョンを、v4.1.2以上に[アップデート](/ja/update)する。
- 以下のコマンドを実行する。

~~~
php artisan exment:patchdata convert_select_table_column
~~~

- これで、すでにデータを保存されているデータの値を、数値型から文字列型に変換します。

### その他
- v4.1.2以降で登録したデータは、登録方法によらず、文字列型として保存されます。
- v4.1.2未満で登録したデータについても、画面で確認する場合は、数値型・文字列型のどちらでも影響はありません。  
本パッチを実行すると、全テーブル(カスタム列「選択肢(他のテーブルから選択)」「ユーザー」「組織」を含むもの)のデータを検索し、データの型が数値であれば、文字列に変換します。  
そのため、パッチの実行には時間がかかることが想定されます。  
これらの理由から、APIでデータ取得を実行する場合など、何らかの理由で型が重要となる場合のみ、実行してください。本パッチは、アップデート実行時に自動的には実施されません。