# Exment設定値一覧
Exment(ならびに関連ライブラリ)では、プロジェクトのフォルダ内にある「.env」ファイルを修正することで、内部の設定を変更することができます。  

## 設定方法
プロジェクトのフォルダより、「.env」ファイルを開き、以下のように追記を行ってください。  
※すでに同じ名前のキーが登録されている場合、値を書き換えてください。

~~~
#例1
EXMENT_API=false

#例2
EXMENT_FILTER_SEARCH_FULL=true
~~~

※「=」の前後にはスペースを入れないようにしてください。

## 設定値一覧

#### アプリケーション言語
- 設定キー : APP_LOCALE
- 既定値 ： en
- 役割 : アプリケーションで表示する言語です。日本語の場合は「ja」を記入してください。


#### タイムゾーン
- 設定キー : APP_TIMEZONE
- 既定値 ： UTC
- 役割 : アプリケーションで使用するタイムゾーンです。日本の場合は「Asia/Tokyo」を記入してください。


#### 「/admin」URL変更
- 設定キー : ADMIN_ROUTE_PREFIX
- 既定値 ： admin
- 役割 : Exmentを表示する際のパス名です。詳細は[こちら](/ja/quickstart_more?id=urlに含む「admin」の変更・削除)をご確認ください。


#### 公開フォームの「/publicform」URI変更

- 設定キー : EXMENT_PUBLICFORM_ROUTE_PREFIX
- 既定値 ： publicform
- 役割 : 公開フォームを表示する際のパス名です。詳細は[こちら](/ja/publicform)の「URLに含む「publicform」の変更」をご確認ください。


#### キャッシュを有効にする
- 設定キー : EXMENT_USE_CACHE
- 既定値 ： false
- 役割 : trueの場合、キャッシュを有効にします。カスタムテーブルや列、ビュー、ワークフローなどのマスターデータをキャッシュ化します。環境によって、高速化する場合があります。


#### マニュアルURL
- 設定キー : EXMENT_MANUAL_URL
- 既定値 : https://exment.net/docs/#/
- 役割 : ExmentのマニュアルURLを設定します。


#### 更新履歴デフォルト値
- 設定キー : EXMENT_REVISION_COUNT
- 既定値 : 100
- 役割 : データ保存時に保持する更新履歴の、デフォルト値です。新規にテーブルを作成する際に使用します。


#### Composerパス
- 設定キー : EXMENT_COMPOSER_PATH
- 既定値 : (なし)
- 役割 : composerコマンドのパスです。特に指定がない場合、環境変数PATHが通っているものとします。


#### MySQLパス
- 設定キー : EXMENT_MYSQL_BIN_DIR
- 既定値 : (なし)
- 役割 : mysqlコマンドのパスです。特に指定がない場合、環境変数PATHが通っているものとします。


#### 検索インデックス件数
- 設定キー : EXMENT_COLUMN_INDEX_ENABLED_COUNT
- 既定値 : 20
- 役割 : 各テーブルで設定する、検索インデックス列数の上限値です。  
<span class="red">※設定値の変更は、自己責任で行ってください。開発元では、21件以上での動作確認を行っておりません。</span>


#### リバースプロキシを許可するIP
- 設定キー : ADMIN_TRUST_PROXY_IPS
- 既定値 : なし
- 役割 : 詳細は[こちら](/ja/additional_reverse_proxy)をご確認ください。


#### リバースプロキシの判別ヘッダー
- 設定キー : ADMIN_TRUST_PROXY_HEADERS
- 既定値 : なし
- 役割 : 詳細は[こちら](/ja/additional_reverse_proxy)をご確認ください。


#### Exment標準のエラーハンドリングを無効化
- 設定キー : EXMENT_DISABLE_EXMENT_EXCEPTION_HANDLER
- 既定値 : false
- 役割 : trueにすることで、Exmentパッケージで付与しているエラーハンドリングを無効化します。


### ログイン
#### デフォルトログインプロバイダ表示
- 設定キー : EXMENT_SHOW_DEFAULT_LOGIN_PROVIDER
- 既定値 : true
- 役割 : ExmentのID・パスワードを使用したログインフォームを表示するかどうかを切り替えます。シングルサインオンを使用する場合に設定が有効になります。詳細は[こちら](/ja/login_sso)をご確認ください。

#### SSOログインプロバイダ文字列
- 設定キー : EXMENT_LOGIN_PROVIDERS
- 既定値 : (なし)
- 役割 : SSOで使用するプロバイダ名一覧を、カンマ区切りで設定します。詳細は[こちら](/ja/login_sso)をご確認ください。


#### ログイン失敗回数計測
- 設定キー : EXMENT_THROTTLE
- 既定値 : true
- 役割 : trueの場合、ログイン失敗が一定回数続いた場合に、一定時間経過するまでログインできなくなります。  

#### ログイン失敗回数
- 設定キー : EXMENT_MAX_ATTEMPTS
- 既定値 : 5
- 役割 : 一定時間ログインできなくなるまでの、ログイン失敗の回数です。  

#### ログイン失敗回復時間(分)
- 設定キー : EXMENT_DECAY_MINUTES
- 既定値 : 60
- 役割 : ログインできなくなった場合に、再度ログインできるようになるまでの時間(分)です。 

#### ブラウザを閉じた場合、自動的にログアウトする
- 設定キー : EXMENT_SESSION_EXPIRE_ON_CLOSE
- 既定値 : false
- 役割 : trueの場合、ブラウザを閉じた場合に、自動的にログアウトします。

#### ログイン画面のヘッダーロゴ未使用
- 設定キー : EXMENT_DISABLE_LOGIN_HEADER_LOGO
- 既定値 : false
- 役割 : trueの場合、Exmentのシステム設定でロゴを設定していても、ログイン画面でヘッダーを使用しません。


### 検索
#### 検索時全文一致
> システム設定画面から変更するように変更になりました。


#### 検索画面から一覧画面へ遷移時の、フィルタ有無
- 設定キー : EXMENT_SEARCH_LIST_LINK_FILTER
- 既定値 : true
- 役割 : trueにすると、データ検索画面から、データ一覧画面へ移動時に、入力した検索条件をフィルタとして維持したまま、一覧表示を行うことができます。


#### 検索バーから検索時、カスタムデータの「添付ファイル」のファイル名を検索対象にする
- 設定キー : EXMENT_SEARCH_DOCUMENT
- 既定値 : false
- 役割 : trueにすることで、検索バーから検索時、カスタムデータの「添付ファイル」のファイル名を検索対象にすることができます。


#### キーワード検索最大件数
- 設定キー : EXMENT_KEYWORD_SEARCH_COUNT
- 既定値 : 1000
- 役割 : キーワード検索時に、1つのテーブルあたりに取得する最大件数です。


#### 関連データ検索最大件数
- 設定キー : EXMENT_KEYWORD_SEARCH_RELATION_COUNT
- 既定値 : 5000
- 役割 : 関連データ検索時に、1つのテーブルあたりに取得する最大件数です。


### メール・通知設定
#### ページ右上の通知バー表示・非表示
- 設定キー : EXMENT_NOTIFY_NAVBAR
- 既定値 : true
- 役割 : falseの場合、ヘッダー右上の通知アイコンが非表示になります。

#### メール設定値をenvファイルより使用
- 設定キー : EXMENT_MAIL_SETTING_ENV_FORCE
- 既定値 : false
- 役割 : trueにすると、メール設定を、.envファイルの設定から使用します。  
(falseの場合、システム設定画面で記入した設定値を使用します。)

#### メール連続通知無視時間(分)
- 設定キー : EXMENT_NOTIFY_SAVED_SKIP_MINUTES
- 既定値 : 5
- 役割 : データ新規作成・更新でのメール通知時、同一のデータの連続した更新では、2件目以降のメールはスキップされます。その連続した通知の件数を判定するための時間(分)です。

#### メールの添付ファイル暗号化
- 設定キー : EXMENT_ARCHIVE_MAIL_ATTACHMENT
- 既定値 : false
- 役割 : trueにすることで、画面からメールで添付ファイルを送信する場合に、添付ファイルをzip暗号化し送信します。  
復号化パスワードは別途送信されます。

#### 通知対象がログインユーザーだった場合、通知をスキップする
- 設定キー : EXMENT_NOTIFY_SKIP_SELF_TARGET
- 既定値 : true
- 役割 : trueの場合、通知時、通知対象がログインユーザー自身だった場合、通知をスキップします。falseの場合、ログインユーザー自身にも通知を行います。

### API

#### API有効・無効
> システム設定画面から変更するように変更になりました。

#### APIの標準取得件数
- 設定キー : EXMENT_API_DEFAULT_DATA_COUNT
- 既定値 ： 20
- 役割 : APIのデータ一覧取得で、countを未使用のときのデータ取得件数です。

#### APIの一覧取得件数上限
- 設定キー : EXMENT_API_MAX_DATA_COUNT
- 既定値 ： 100
- 役割 : APIのデータ一覧取得で、同時に取得できる最大件数です。

#### APIの一括新規作成件数上限
- 設定キー : EXMENT_API_MAX_CREATE_COUNT
- 既定値 ： 100
- 役割 : APIの一括新規作成で、同時に新規作成できる最大件数です。

#### APIの一括削除件数上限
- 設定キー : EXMENT_API_MAX_DELETE_COUNT
- 既定値 ： 100
- 役割 : APIの一括削除で、同時に削除できる最大件数です。

#### データのlabel（）
- 設定キー : EXMENT_API_APPEND_LABEL
- 既定値 ： false
- 役割 : trueにすることで、データ一覧取得、もしくはデータ新規作成・更新の実行時に、label列を含めることができます。


### 一覧(グリッド)

#### 行クリック時の画面遷移無効
- 設定キー : EXMENT_GRIDROW_SELECT_DISABLED
- 既定値 : false
- 役割 : trueにすることで、一覧画面の行をクリックしたときの画面遷移が無効になります。

#### 行クリック時に編集画面遷移
- 設定キー : EXMENT_GRIDROW_SELECT_EDIT
- 既定値 : false
- 役割 : trueにすることで、一覧画面の行をクリックしたとき、データ編集画面に遷移します。（既定はデータ詳細画面です。）

#### カスタムデータの一覧画面での、表示件数の選択肢の設定
- 設定キー : EXMENT_GRID_PER_PAGES
- 既定値 : なし
- 役割 : カスタムデータの一覧画面での、表示件数の選択肢の設定値を入力してください。複数の場合はカンマ区切りにしてください。例：100,200,500,1000

#### カスタムデータのコピーリンクを表示する
- 設定キー : EXMENT_GRIDROW_SHOW_COPY_BUTTON
- 既定値 : false
- 役割 : trueにすることで、一覧画面の操作欄にコピーリンクを表示します。


### カスタムデータ

#### カスタムデータ画面の「テーブル詳細」ボタン非表示
- 設定キー : EXMENT_TABLE_BUTTON_DISABLED
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ画面の「テーブル詳細」ボタンが非表示になります。

#### カスタムデータ画面の「テーブル詳細」ボタン非表示(ユーザーのみ)
- 設定キー : EXMENT_TABLE_BUTTON_DISABLED_USER
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ画面の「テーブル詳細」ボタンが非表示になります。※一般ユーザーのみです。システム管理者、そのテーブルの管理者は表示されます。

#### カスタムデータ画面の「ビュー変更」ボタン非表示
- 設定キー : EXMENT_VIEW_BUTTON_DISABLED
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ画面の「ビュー変更」ボタンが非表示になります。

#### カスタムデータ画面の「ビュー変更」ボタン非表示(ユーザーのみ)
- 設定キー : EXMENT_VIEW_BUTTON_DISABLED_USER
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ画面の「ビュー変更」ボタンが非表示になります。※一般ユーザーのみです。システム管理者、そのテーブルの管理者は表示されます。

#### 「選択肢(他のテーブルへの参照)」「ユーザー」「組織」のデータ検索ダイアログ機能無効化
- 設定キー : EXMENT_SELECT_TABLE_MODAL_SEARCH_DISABLED
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ入力画面で、「選択肢(他のテーブルへの参照)」「ユーザー」「組織」のデータ検索ダイアログ機能が無効化されます。

#### 「選択肢(他のテーブルへの参照)」「ユーザー」「組織」について、「選択肢を都度検索する」形式に切り替える件数
- 設定キー : EXMENT_SELECT_TABLE_LIMIT_COUNT
- 既定値 : 100
- 役割 : カスタムデータ新規作成・編集画面で、選択項目を「選択肢を都度検索する」形式に切り替える件数を設定します。  

#### カスタム列「エディター」の、画像アップロード機能を無効にする
- 設定キー : EXMENT_DIABLE_UPLOAD_IMAGES_EDITOR
- 既定値 : false
- 役割 : trueにすることで、カスタムデータ編集画面で、カスタム列「エディター」での画像アップロード機能を無効にします。

#### カスタムデータの添付ファイルで、1度にアップロードできるファイル数
- 設定キー : EXMENT_DOCUMENT_UPLOAD_MAX_COUNT
- 既定値 : 5
- 役割 : カスタムデータの添付ファイルのフォームで、1度にアップロードできる件数です。

#### カスタムデータの詳細画面で、「読み取り専用」フィールドを表示しないようにする
- 設定キー : EXMENT_DISABLE_SHOW_FIELD_READONLY
- 既定値 : false
- 役割 : trueにすることで、カスタムデータの詳細画面で、「読み取り専用」に設定されている項目を非表示にします。

#### カスタムデータの詳細画面で、「表示専用」フィールドを表示しないようにする
- 設定キー : EXMENT_DISABLE_SHOW_FIELD_VIEWONLY
- 既定値 : false
- 役割 : trueにすることで、カスタムデータの詳細画面で、「表示専用」に設定されている項目を非表示にします。

#### カスタム列「複数行テキスト」「エディタ」の最大文字数
- 設定キー : EXMENT_CHAR_LENGTH_LIMIT_COUNT
- 既定値 : 63999
- 役割 : システムとして設定できる、カスタム列「複数行テキスト」「エディタ」の最大文字数

#### 論理削除を利用せず、常に物理削除を行う
- 設定キー : EXMENT_DELETE_FORCE_CUSTOM_VALUE
- 既定値 : false
- 役割 : trueにすることで、カスタムデータの論理削除を使用せず、常に物理削除を実施します。

#### カレンダービューの表示時、IDと各項目のデータも取得する
- 設定キー : EXMENT_CALENDAR_DATA_GET_VALUE
- 既定値 : false
- 役割 : trueにすることで、カスタムビューの表示時、IDと各項目のデータも取得するようにします。  
※[プラグイン(スクリプト)](/ja/plugin_quickstart_script)で、カスタムビューの表示を書き換える際に、各データの値を使用したい場合はtrueにしてください。


### 組織設定

#### 組織一覧ページで階層表示を行う
- 設定キー : EXMENT_SHOW_ORGANIZATION_TREE
- 既定値 : false
- 役割 : trueにすることで、組織一覧ページで、組織の階層表示が出来るようになります。

#### カスタムデータ自動共有設定-既定値
- 設定キー : EXMENT_CUSTOM_VALUE_SAVE_AUTOSHARE_DEFAULT
- 既定値 : 0
- 役割 : カスタムテーブル設定の「カスタムデータ自動共有設定」での既定値です。以下の中から選択してください。
    - 0 : ログインユーザーのみ
    - 1 : ログインユーザーと、所属する最下層の組織
    - 2 : ログインユーザーと、所属するすべての組織

### 並び順設定

#### ユーザー編集画面の所属組織設定の並び順
- 設定キー : EXMENT_SORT_ORG_BY_DEFAULT_VIEW
- 既定値 : false
- 役割 : trueにすることで、ユーザー編集画面の所属組織設定で組織の並び順を（組織の）既定ビューの並び順に合わせます。falseの場合はid順になります。

#### 役割グループ設定の並び順
- 設定キー : EXMENT_SORT_ROLE_GROUP_BY_ORDER
- 既定値 : false
- 役割 : trueにすることで、ユーザー編集画面や組織編集画面の役割グループ設定の並び順、及び役割グループ一覧画面の並び順を（役割グループの）表示順に合わせます。falseの場合はid順になります。


### インポート・エクスポート

#### インポートの無効
- 設定キー : EXMENT_IMPORT_DISABLED
- 既定値 : false
- 役割 : trueにすることで、全テーブルの一覧画面で、データのインポート機能を非表示にします。

#### エクスポートの無効
- 設定キー : EXMENT_EXPORT_DISABLED
- 既定値 : false
- 役割 : trueにすることで、全テーブルの一覧画面で、データのエクスポート機能を非表示にします。

#### エクスポート(ビュー)の無効
- 設定キー : EXMENT_EXPORT_VIEW_DISABLED
- 既定値 : false
- 役割 : trueにすることで、全テーブルの一覧画面で、データのエクスポート(ビュー)機能を非表示にします。

#### csv形式によるインポート・エクスポートの無効
- 設定キー : EXMENT_IMPORT_EXPORT_DISABLED_CSV
- 既定値 : false
- 役割 : trueにすることで、全テーブルの一覧画面で、データのインポート・エクスポートボタンから、csv形式が表示されなくなります。

#### xlsx形式によるインポート・エクスポートの無効
- 設定キー : EXMENT_IMPORT_EXPORT_DISABLED_EXCEL
- 既定値 : false
- 役割 : trueにすることで、全テーブルの一覧画面で、データのインポート・エクスポートボタンから、xlsx形式が表示されなくなります。

#### csv形式のエクスポート時、BOMを追加
- 設定キー : EXMENT_EXPORT_APPEND_CSV_BOM
- 既定値 : false
- 役割 : trueにすることで、CSVデータのエクスポート時、BOMを追加します。(Excelで開いても文字化けが発生しません。)

### ダッシュボード

#### ダッシュボード行数
- 設定キー : EXMENT_DASHBOARD_ROWS
- 既定値 : 4
- 役割 : ダッシュボードに配置できる行数を変更します。  


#### ダッシュボードの最新バージョン通知無効
- 設定キー : EXMENT_DISABLE_LATEST_VERSION_DASHBOARD
- 既定値 : false
- 役割 : trueにすることで、ダッシュボードに表示される、最新バージョン通知機能を無効にします。

#### ダッシュボードのグラフ表示の色を変更
- 設定キー : EXMENT_CHART_BG_COLOR
- 既定値 : #FF6384,#36A2EB,#FFCE56,#339900,#FF6633,#CC0099
- 役割 : ダッシュボードに表示するグラフの色の種類を、カンマ区切りで変更できます。指定した色数を超えた件数のグラフを表示する場合は、循環して色を指定します。

※この設定は、v3.4.3より追加されています。v3.4.2以下でExmentのインストールを行ったユーザーは、上記の設定値が固定値になっています。  
変更する場合、"config/exment.php"ファイルを開き、以下の記載の変更を行ってください。  

``` php
///// from
    // 'chart_backgroundColor' => [
    //     "#FF6384",
    //     "#36A2EB",
    //     "#FFCE56",
    //     "#339900",
    //     "#ff6633",
    //     "#cc0099"
    // ],

///// to
    'chart_backgroundColor' => env('EXMENT_CHART_BG_COLOR', '#FF6384,#36A2EB,#FFCE56,#339900,#ff6633,#cc0099'),
```


### ファイル

#### 添付ファイルを、アップロード者以外が削除できないようにする
- 設定キー : EXMENT_FILE_DELETE_USERONLY
- 既定値 : false
- 役割 : trueにすることで、データ詳細画面でアップロードされているファイルは、アップロード者以外は削除できないようになります。

#### ファイルのドラッグ＆ドロップの無効
- 設定キー : EXMENT_FILE_DRAG_DROP_DISABLED
- 既定値 : false
- 役割 : trueにすることで、カスタム列のファイル・画像列などのドラッグ＆ドロップ表示項目を無効にします。

#### 添付ファイルをクリックした時に、ブラウザ上で表示する拡張子の変更
- 設定キー : EXMENT_FILE_DOWNLOAD_INLINE_EXTENSIONS
- 既定値 : なし
- 役割 : 添付ファイルをクリックした時に、ブラウザ上で表示する拡張子を、ドットなしで、拡張子区切りで記載します。(例：png,jpg,gif)  
- その他特記事項 : ファイルクリックの挙動について、以前は全ファイルをブラウザ上で表示していましたが、[脆弱性の指摘](/ja/weakness/20200819_2)を受け、添付ファイルはダウンロードする形式にしています。  
上記のような背景がありますので、<span class="red">この設定は、自己責任でお願いします。</span>



### その他

#### 公開フォームで、カスタム列「選択肢(他のテーブルから選択)」「ユーザー」「組織」で、suuid(20桁のランダム文字列)でのみ初期値をセットできるようにする

- 設定キー : EXMENT_PUBLICFORM_URLPARAM_SUUID
- 既定値 ： false
- 役割 :詳細は[こちら](/ja/publicform)の「カスタム列「選択肢(他のテーブルから選択)」「ユーザー」「組織」で、suuid(20桁のランダム文字列)でのみ初期値をセットできるようにしたい場合」をご確認ください。


#### HTTPレスポンス内の改行コード削除
- 設定キー : EXMENT_REMOVE_RESPONSE_SPACE
- 既定値 : false
- 役割 : trueにすることで、レスポンス内の改行コードを削除します。

#### ユーザービュー無効

> v3.5.0より、システム設定画面から変更するように変更になりました。

#### ユーザーダッシュボード無効

> v3.5.0より、システム設定画面から変更するように変更になりました。

#### データ詳細画面で「隠しフィールド」を非表示にする
- 設定キー : EXMENT_HIDE_HIDDENFIELD
- 既定値 : false
- 役割 : trueにすることで、データ詳細画面で、フォーム設定で「隠しフィールド」になっているデータを非表示にします。



### デバッグ・開発者向け

#### エキスパートモード
- 設定キー : EXMENT_EXPART_MODE
- 既定値 ： false
- 役割 : trueにすることで、より柔軟で、システムに詳しい方向けの設定を行うことができるようになります。


#### デバッグモード(リクエスト値出力)
- 設定キー : EXMENT_DEBUG_MODE_REQUEST
- 既定値 ： false
- 役割 : trueにすることで、ExmentのWebサービスへのリクエスト値をログ出力します。  


#### デバッグモード(SQLログ出力)
- 設定キー : EXMENT_DEBUG_MODE_SQL
- 既定値 ： false
- 役割 : trueにすることで、ExmentでSQLを実行時、SQL文をログ出力することができます。※開発用です。


#### デバッグモード(SQLログ出力 - 関数表示)
- 設定キー : EXMENT_DEBUG_MODE_SQLFUNCTION
- 既定値 ： false
- 役割 : ExmentでSQLを実行時で、「EXMENT_DEBUG_MODE_SQL」がtrueのときに、trueにすることで、SQL文と同時に、呼び出し元の関数一覧をログ出力することができます。※開発用です。


#### デバッグモード(スケジューリングログ出力)
- 設定キー : EXMENT_DEBUG_MODE_SCHEDULE
- 既定値 ： false
- 役割 : スケジューリング実施時に、trueにすることで、スケジューリング定義や実行の途中経過を確認することができます。詳細は[こちら](/ja/additional_task_schedule)の「うまく動作しない場合の検証」をご確認ください。※検証用です。

